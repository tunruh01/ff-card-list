(this["webpackJsonpff-card-list"]=this["webpackJsonpff-card-list"]||[]).push([[0],{36:function(t,e,s){},37:function(t,e,s){},40:function(t,e){},42:function(t,e){},60:function(t,e,s){"use strict";s.r(e);var a=s(1),n=s.n(a),r=s(27),i=s.n(r),c=(s(36),s(37),s(10)),l=s(2),o=s(3),d=s(5),u=s(4),p=s(20),h=s(29),f=s.n(h),m=s(31),j=s(13),_=s(0),y=function(t){Object(d.a)(s,t);var e=Object(u.a)(s);function s(){return Object(l.a)(this,s),e.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){return Object(_.jsx)("div",{className:"set-header",children:"PR"===this.props.setData.opus?"Promo Exclusive":"Opus ".concat(this.props.setData.opus)})}}]),s}(a.Component),b=function(t){Object(d.a)(s,t);var e=Object(u.a)(s);function s(){return Object(l.a)(this,s),e.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var t=this.props.card,e=[];switch(this.props.displayMode){case"want":e.push(Object(_.jsx)("div",{className:"card-quantity",children:"Need: ".concat(3-t.current_playset_amount)},"want"));break;case"trade":t.current_non_foil_playset_amount<3&&e.push(Object(_.jsx)("div",{className:"card-quantity",children:"Trade Amt: ".concat(t.total_amount-t.current_playset_amount)},"trade")),t.quantities.forEach((function(t,s){"Regular"!==t.design_type?t.quantity>0&&e.push(Object(_.jsx)("div",{className:"card-quantity",children:"".concat(t.design_type,": ").concat(t.quantity)},s)):t.quantity>3&&e.push(Object(_.jsx)("div",{className:"card-quantity",children:"".concat(t.design_type,": ").concat(t.quantity-3)},s))}));break;case"trade-down":e.push(Object(_.jsx)("div",{className:"card-quantity",children:"Need: ".concat(3-t.current_non_foil_playset_amount)},"trade")),t.quantities.forEach((function(t,s){"Regular"!==t.design_type&&t.quantity>0&&e.push(Object(_.jsx)("div",{className:"card-quantity",children:"".concat(t.design_type,": ").concat(t.quantity)},s))}))}return Object(_.jsxs)("div",{className:"card",children:[Object(_.jsx)("img",{src:t.image?t.image:"https://upload.wikimedia.org/wikipedia/en/b/b4/Final_Fantasy_CCG.jpg",alt:"",className:"card-img"}),Object(_.jsxs)("div",{className:"card-data",children:[Object(_.jsx)("div",{className:"card-name",children:t.name}),Object(_.jsx)("div",{className:"card-code",children:t.serial}),e]})]})}}]),s}(a.Component),O=function(t){Object(d.a)(s,t);var e=Object(u.a)(s);function s(){return Object(l.a)(this,s),e.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var t=this,e=[];return this.props.setData.cards.forEach((function(s,a){e.push(Object(_.jsx)(b,{displayMode:t.props.displayMode,card:s},a))})),Object(_.jsxs)("div",{className:"card-set",children:[e.length>0&&e,e.length<=0&&Object(_.jsx)("div",{children:"No Results for Set."})]})}}]),s}(a.Component),v=function(t){Object(d.a)(s,t);var e=Object(u.a)(s);function s(t){var a;return Object(l.a)(this,s),(a=e.call(this,t)).state={},a}return Object(o.a)(s,[{key:"render",value:function(){return Object(_.jsxs)("div",{children:[Object(_.jsx)(y,{setData:this.props.setData}),Object(_.jsx)(O,{displayMode:this.props.displayMode,setData:this.props.setData})]})}}]),s}(a.Component),g=function(t){Object(d.a)(s,t);var e=Object(u.a)(s);function s(){return Object(l.a)(this,s),e.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var t=this,e=[],s=["All"];this.props.cardData.forEach((function(t){e.push(t.opus),t.cards.forEach((function(t){t.quantities.forEach((function(t){s.includes(t.design_type)||s.push(t.design_type)}))}))}));(e=e.sort((function(t,e){return t.localeCompare(e,"en",{numeric:!0})}))).unshift("All");var a=["All","L","H","R","C"];return"trade-down"!==this.props.displayMode&&a.push("PR Only"),Object(_.jsxs)("div",{className:"filter-options",children:[Object(_.jsx)("div",{className:"filter-option-desc",children:"Set:"}),Object(_.jsx)("ul",{className:"filter-option-collection",children:e.map((function(e){return Object(_.jsx)("li",{onClick:function(){return t.props.updateFilter("sets",e)},className:"filter-option-item ".concat(t.props.filters.sets.includes(e)?"selected":""),children:e},e)}))}),Object(_.jsx)("div",{className:"filter-option-desc",children:"Rarity"}),Object(_.jsx)("ul",{className:"filter-option-collection",children:a.map((function(e){return Object(_.jsx)("li",{onClick:function(){return t.props.updateFilter("rarities",e)},className:"filter-option-item ".concat(t.props.filters.rarities.includes(e)?"selected":""),children:e},e)}))}),"want"!==this.props.displayMode&&Object(_.jsx)("div",{className:"filter-option-desc",children:"Design:"}),"want"!==this.props.displayMode&&Object(_.jsx)("ul",{className:"filter-option-collection",children:s.map((function(e){return Object(_.jsx)("li",{onClick:function(){return t.props.updateFilter("designs",e)},className:"filter-option-item ".concat(t.props.filters.designs.includes(e)?"selected":""),children:e},e)}))})]})}}]),s}(a.Component),x=function(t){Object(d.a)(s,t);var e=Object(u.a)(s);function s(t){var a;return Object(l.a)(this,s),(a=e.call(this,t)).sortedAndFilteredCardData=function(){var t=Object(m.a)(a.props.cardData).sort((function(t,e){return t.opus.localeCompare(e.opus,"en",{numeric:!0})}));t=t.map((function(t){return Object(c.a)({},t)})),a.props.filters.sets&&!a.props.filters.sets.includes("All")&&(t=t.filter((function(t){return a.props.filters.sets.includes("All")||a.props.filters.sets.includes(t.opus)})));for(var e=0;e<t.length;e++)a.props.filters.rarities&&!a.props.filters.rarities.includes("All")&&(t[e].cards=t[e].cards.filter((function(t){var e=t.serial.startsWith("PR")?"PR Only":t.serial[t.serial.length-1];return a.props.filters.rarities.includes(e)}))),a.props.filters.designs&&!a.props.filters.designs.includes("All")&&(t[e].cards=t[e].cards.filter((function(t){return t.quantities.map((function(t){return t.quantity>0?t.design_type:null})).some((function(t){return a.props.filters.designs.includes(t)}))}))),t[e].cards=t[e].cards.filter((function(t){switch(a.props.displayMode){case"want":return t.current_playset_amount<3;case"trade":return t.current_playset_amount>=3&&t.total_amount>t.current_playset_amount;case"trade-down":return t.current_playset_amount>t.current_non_foil_playset_amount;default:return!1}}));return t},a.handleScroll=a.handleScroll.bind(Object(j.a)(a)),a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll),document.documentElement.scrollTop=this.props.initialScrollPos}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(t){this.props.setScrollPos(t.target.scrollingElement.scrollTop)}},{key:"render",value:function(){var t=this;return Object(_.jsxs)("div",{children:[Object(_.jsx)(g,{filters:this.props.filters,updateFilter:this.props.updateFilter,displayMode:this.props.displayMode,cardData:this.props.cardData}),this.sortedAndFilteredCardData().map((function(e,s){return e.cards.length>0?Object(_.jsx)(v,{displayMode:t.props.displayMode,setData:e},s):null}))]})}}]),s}(a.Component),k=function(t){Object(d.a)(s,t);var e=Object(u.a)(s);function s(){var t;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).headerItemClicked=function(e){e===t.props.displayMode?window.scroll({top:0,left:0,behavior:"smooth"}):t.props.changeDisplay(e)},t}return Object(o.a)(s,[{key:"render",value:function(){var t=this;return Object(_.jsxs)("div",{className:"want-trade-header",children:[Object(_.jsx)("div",{className:"header-option ".concat("want"===this.props.displayMode?"selected-header":""),onClick:function(){return t.headerItemClicked("want")},children:"Want"}),Object(_.jsx)("div",{className:"header-option ".concat("trade"===this.props.displayMode?"selected-header":""),onClick:function(){return t.headerItemClicked("trade")},children:"Trade"}),Object(_.jsx)("div",{className:"header-option ".concat("trade-down"===this.props.displayMode?"selected-header":""),onClick:function(){return t.headerItemClicked("trade-down")},children:"Trade Down"})]})}}]),s}(a.Component),w=function(t){Object(d.a)(s,t);var e=Object(u.a)(s);function s(t){var a;return Object(l.a)(this,s),(a=e.call(this,t)).setDisplayMode=function(t){a.setState({display_mode:t})},a.setScrollPos=function(t){var e=Object(c.a)({},a.state.scroll_pos);e[a.state.display_mode]=t,a.setState({scroll_pos:e})},a.updateFilter=function(t,e){var s=Object(c.a)({},a.state.filters);if("All"===e||"sets"===t||s[a.state.display_mode][t].includes("All"))s[a.state.display_mode][t]=[],s[a.state.display_mode][t].push(e);else if(s[a.state.display_mode][t].includes(e)){var n=s[a.state.display_mode][t].indexOf(e);n>-1&&s[a.state.display_mode][t].splice(n,1)}else s[a.state.display_mode][t].push(e);a.setState({filters:s})},a.state={promo_card_data:null,ffdecks_data:null,collection_data:null,card_set_data:null,display_mode:"want",scroll_pos:{},filters:{want:{sets:["All"],rarities:["All"]},trade:{sets:["All"],designs:["All"],rarities:["L","H","PR Only"]},"trade-down":{sets:["All"],designs:["All"],rarities:["L","H"]}}},a}return Object(o.a)(s,[{key:"componentDidUpdate",value:function(t,e,s){if((null===e.promo_card_data||null===e.ffdecks_data||null===e.collection_data)&&null!==this.state.promo_card_data&&null!==this.state.ffdecks_data&&null!==this.state.collection_data){var a=[];this.state.ffdecks_data.cards.forEach((function(t){var e={};e.name=t.name,e.image=t.image,e.serial=t.serial_number,e.serial+="Promo"!==t.rarity?t.rarity[0]:"",e.quantities=[],e.quantities.push({design_type:"Regular",quantity:0,playset_important:!0}),e.current_playset_amount=0,e.current_non_foil_playset_amount=0,e.opus="-"===t.serial_number[1]?t.serial_number[0]:t.serial_number.substring(0,2),a.push(e)})),this.state.collection_data.forEach((function(t,e){if(e>0){var s=t[1]+("Promo"!==t[2]?t[2][0]:""),n=a.findIndex((function(t){return t.serial===s}));n>=0?(a[n].quantities[0].quantity=parseInt(t[3]),a[n].current_non_foil_playset_amount=Math.min(parseInt(t[3]),3),a[n].quantities.push({design_type:"Foil",quantity:parseInt(t[4]),playset_important:!1})):console.log("missing serial from collection"+s)}})),this.state.promo_card_data.forEach((function(t,e){if(e>0){var s=t[0],n=a.findIndex((function(t){return t.serial===s}));if(n>=0)a[n].quantities.push({design_type:t[3].replace("Full Art","FA").replace("Prerelease","PreR").replace("Promo","PR").replace("Alternate","Alt"),quantity:parseInt(t[1]),playset_important:!1});else{console.log("missing serial from promos"+s);var r={};r.name=t[2],r.serial=t[0],r.quantities=[],r.quantities.push({design_type:"Regular",quantity:0,playset_important:!0}),r.quantities.push({design_type:t[3].replace("Full Art","FA").replace("Prerelease","PreR").replace("Promo","PR").replace("Alternate","Alt"),quantity:parseInt(t[1]),playset_important:!1}),r.current_playset_amount=0,r.current_non_foil_playset_amount=0,r.opus="-"===r.serial[1]?r.serial[0]:r.serial.substring(0,2),a.push(r)}}}));for(var n=0;n<a.length;n++)a[n].total_amount=a[n].quantities.reduce((function(t,e){return t+e.quantity}),0),a[n].current_playset_amount=Math.min(3,a[n].total_amount);var r=[];a.forEach((function(t){var e=r.findIndex((function(e){return e.opus===t.opus}));e<0&&(r.push({opus:t.opus,cards:[]}),e=r.length-1),r[e].cards.push(t)})),this.setState({card_set_data:r})}}},{key:"componentDidMount",value:function(){var t=this;Object(p.a)("https://docs.google.com/spreadsheets/d/e/2PACX-1vTNKDBLs5ncNghesIYn2C4JlnJ5TZBNUmPZRsjAk9tyVxqoAcTs69QijdIo0Ys3_svdyCXwDlf814J5/pub?output=csv",{complete:function(e){t.setState({promo_card_data:e.data})}}),Object(p.a)("https://docs.google.com/spreadsheets/d/e/2PACX-1vS5ZPsow9nzjVX6XP9ru1CRw6913D6RDrszOujy_TerRNWm17jXdf04u38YLscBfTS-35Ix4AUY85dk/pub?output=csv",{complete:function(e){t.setState({collection_data:e.data})}}),fetch("http://ffdecks.com/api/cards/basic").then((function(t){return t.json()})).then((function(e){t.setState({ffdecks_data:e}),console.log("ffdecks_data_fetched")}))}},{key:"render",value:function(){return this.state.card_set_data?Object(_.jsxs)("div",{style:{height:"100%"},children:[Object(_.jsx)(k,{changeDisplay:this.setDisplayMode,displayMode:this.state.display_mode}),"want"===this.state.display_mode&&Object(_.jsx)(x,{filters:this.state.filters.want,updateFilter:this.updateFilter,setScrollPos:this.setScrollPos,initialScrollPos:this.state.scroll_pos.want,cardData:this.state.card_set_data,displayMode:this.state.display_mode}),"trade"===this.state.display_mode&&Object(_.jsx)(x,{filters:this.state.filters.trade,updateFilter:this.updateFilter,setScrollPos:this.setScrollPos,initialScrollPos:this.state.scroll_pos.trade,cardData:this.state.card_set_data,displayMode:this.state.display_mode}),"trade-down"===this.state.display_mode&&Object(_.jsx)(x,{filters:this.state.filters["trade-down"],updateFilter:this.updateFilter,setScrollPos:this.setScrollPos,initialScrollPos:this.state.scroll_pos["trade-down"],cardData:this.state.card_set_data,displayMode:this.state.display_mode})]}):Object(_.jsx)(f.a,{color:"black",loading:!0,size:150})}}]),s}(a.Component);s(30).polyfill();var N=function(){return Object(_.jsx)("div",{className:"App",children:Object(_.jsx)(w,{})})},P=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,61)).then((function(e){var s=e.getCLS,a=e.getFID,n=e.getFCP,r=e.getLCP,i=e.getTTFB;s(t),a(t),n(t),r(t),i(t)}))};i.a.render(Object(_.jsx)(n.a.StrictMode,{children:Object(_.jsx)(N,{})}),document.getElementById("root")),P()}},[[60,1,2]]]);
//# sourceMappingURL=main.e223fff3.chunk.js.map